<!DOCTYPE html>
<html lang="id">
  <head>
    <base href="/" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-Magazine Arsip - HMTE Unsoed</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../css/style.css" />
    <link rel="stylesheet" href="../../css/satoshi.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous" referrerpolicy="no-referrer"
    />

    <style>
      /* ── BASE & BACKGROUND (GRID TEMA NEWS) ── */
      html { overflow-x: hidden !important; }
      body {
        overflow-x: hidden !important;
        max-width: 100vw !important;
        color: #ffffff !important;
        margin: 0; min-height: 100vh;
        
        /* Background kotak-kotak bawaan style.css (News) */
        background-color: #161616 !important;
        background-image: linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px), 
                          linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px) !important;
        background-size: 55px 55px !important;
      }

      /* ── HEADER CLEARANCE & GLOW ── */
      .archive-section {
        padding-top: 120px;
        padding-bottom: 80px;
        position: relative;
      }
      .archive-section::before {
        content: '';
        position: absolute; top: 0; left: 50%; transform: translateX(-50%);
        width: min(700px, 100%); height: 300px;
        background: radial-gradient(ellipse, rgba(15,188,109,0.06) 0%, transparent 70%);
        pointer-events: none;
      }

      /* ── PAGE HEADER ── */
      .archive-page-header {
        text-align: center;
        margin-bottom: clamp(32px, 5vh, 56px);
        opacity: 0; transform: translateY(24px);
        transition: opacity 0.7s ease, transform 0.7s ease;
      }
      .archive-page-header.is-visible { opacity: 1; transform: translateY(0); }

      .archive-eyebrow {
        display: inline-flex; align-items: center; gap: 10px;
        font-size: 0.68rem; letter-spacing: 0.22em;
        text-transform: uppercase; color: #0fbc6d; font-weight: 700;
        margin-bottom: 12px;
      }
      .archive-eyebrow::before, .archive-eyebrow::after {
        content: ''; display: block; width: 24px; height: 1px;
        background: #0fbc6d; opacity: 0.6;
      }
      .archive-title {
        font-size: clamp(2rem, 6vw, 3.5rem);
        font-weight: 900; color: #fff;
        letter-spacing: -0.04em; line-height: 1.1;
        margin: 0 0 12px;
      }
      .archive-title em { font-style: normal; color: #0fbc6d; }
      .archive-subtitle {
        font-size: clamp(0.85rem, 2vw, 1rem);
        color: rgba(156,163,175,0.6);
        max-width: 480px; margin: 0 auto; line-height: 1.65;
      }

      /* ── STATS BAR ── */
      .archive-stats {
        display: flex; justify-content: center; gap: 32px;
        margin-bottom: clamp(28px, 4vh, 44px);
        opacity: 0; transform: translateY(16px);
        transition: opacity 0.6s ease 0.15s, transform 0.6s ease 0.15s;
      }
      .archive-stats.is-visible { opacity: 1; transform: translateY(0); }
      .archive-stat {
        display: flex; flex-direction: column; align-items: center; gap: 2px;
      }
      .archive-stat-num {
        font-size: 1.5rem; font-weight: 900; color: #0fbc6d;
        line-height: 1;
      }
      .archive-stat-label {
        font-size: 0.65rem; letter-spacing: 0.1em; text-transform: uppercase;
        color: rgba(156,163,175,0.45); font-weight: 600;
      }

      /* ── DIVIDER ── */
      .archive-divider {
        border: 0; height: 1px; margin: 0 0 clamp(28px, 4vh, 44px);
        background: linear-gradient(to right, transparent, rgba(15,188,109,0.3) 30%, rgba(15,188,109,0.3) 70%, transparent);
        opacity: 0; transform: scaleX(0.5);
        transform-origin: center;
        transition: opacity 0.5s ease 0.2s, transform 0.6s cubic-bezier(0.23,1,0.32,1) 0.2s;
      }
      .archive-divider.is-visible { opacity: 1; transform: scaleX(1); }

      /* ── GRID — kunci max-width agar tidak raksasa di desktop ── */
      .archive-grid {
        display: grid;
        /* Mobile: 2 kolom | Tablet: 3 kolom | Desktop: 4 kolom */
        grid-template-columns: repeat(2, 1fr);
        gap: clamp(12px, 2vw, 20px);
        /* Max-width container: 4 × 260px + 3 × gap = ~1100px */
        max-width: 1100px;
        margin: 0 auto;
      }
      @media (min-width: 480px)  { .archive-grid { grid-template-columns: repeat(3, 1fr); } }
      @media (min-width: 768px)  { .archive-grid { grid-template-columns: repeat(4, 1fr); } }

      /* ── CARD ── */
      .emagz-card {
        position: relative; border-radius: 14px; overflow: hidden;
        background: linear-gradient(145deg,
          rgba(15,188,109,0.07) 0%, rgba(13,17,23,0.98) 35%,
          rgba(13,17,23,0.98) 65%, rgba(15,188,109,0.04) 100%
        );
        border: 1px solid rgba(15,188,109,0.1);
        box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        text-decoration: none; display: flex; flex-direction: column;
        /* Animasi awal */
        opacity: 0; transform: translateY(32px);
        transition:
          opacity 0.55s cubic-bezier(0.23,1,0.32,1),
          transform 0.55s cubic-bezier(0.23,1,0.32,1),
          border-color 0.3s ease, box-shadow 0.3s ease;
      }
      .emagz-card.is-visible { opacity: 1; transform: translateY(0); }
      .emagz-card::before {
        content: ''; position: absolute; top: 0; left: 8%; right: 8%; height: 1px;
        background: linear-gradient(90deg, transparent, rgba(15,188,109,0.35), transparent);
        z-index: 2;
      }
      .emagz-card:hover {
        transform: translateY(-5px) !important;
        border-color: rgba(15,188,109,0.3);
        box-shadow: 0 16px 40px rgba(0,0,0,0.55), 0 0 20px rgba(15,188,109,0.08);
      }

      /* Cover dengan aspect-ratio 2:3 — anti-gepeng */
      .emagz-card-cover {
        position: relative; width: 100%;
        aspect-ratio: 2 / 3;
        overflow: hidden; flex-shrink: 0;
      }
      .emagz-card-cover img {
        width: 100%; height: 100%; object-fit: cover;
        filter: brightness(0.88) saturate(1.05);
        transition: transform 0.5s ease, filter 0.3s ease;
      }
      .emagz-card:hover .emagz-card-cover img { transform: scale(1.05); filter: brightness(0.98); }
      .emagz-card-cover::after {
        content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 40%;
        background: linear-gradient(to top, rgba(13,17,23,0.8), transparent);
        pointer-events: none;
      }

      .emagz-card-edition-badge {
        position: absolute; top: 8px; right: 8px; z-index: 3;
        padding: 3px 8px; border-radius: 20px;
        font-size: 0.55rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase;
        background: rgba(15,188,109,0.18); border: 1px solid rgba(15,188,109,0.35);
        color: #0fbc6d; backdrop-filter: blur(8px);
      }

      .emagz-card-body {
        padding: 10px 12px 14px;
        display: flex; flex-direction: column; gap: 4px;
        flex: 1;
      }
      .emagz-card-meta { display: flex; align-items: center; gap: 5px; flex-wrap: wrap; }
      .emagz-card-date { font-size: 0.6rem; color: rgba(156,163,175,0.45); }
      .emagz-card-dot  { width: 2px; height: 2px; background: rgba(156,163,175,0.3); border-radius: 50%; }
      .emagz-card-tag  {
        font-size: 0.55rem; letter-spacing: 0.1em; text-transform: uppercase;
        color: #0fbc6d; font-weight: 700; padding: 2px 5px;
        background: rgba(15,188,109,0.1); border-radius: 20px;
        border: 1px solid rgba(15,188,109,0.18);
      }
      .emagz-card-title {
        font-size: clamp(0.78rem, 1.8vw, 0.88rem); font-weight: 800;
        color: rgba(255,255,255,0.9); line-height: 1.3; margin: 0;
        display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
        transition: color 0.2s ease;
      }
      .emagz-card:hover .emagz-card-title { color: #fff; }
      .emagz-card-desc {
        font-size: 0.68rem; color: rgba(156,163,175,0.5); line-height: 1.5; margin: 0;
        display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
      }
      .emagz-card-read {
        display: inline-flex; align-items: center; gap: 4px; margin-top: 6px;
        font-size: 0.67rem; color: rgba(15,188,109,0.6); font-weight: 600;
        transition: color 0.2s ease, gap 0.2s ease;
      }
      .emagz-card:hover .emagz-card-read { color: #0fbc6d; gap: 7px; }

      /* ── PAGE FADE IN ── */
      .page-fade {
        animation: pageFadeIn 0.65s ease both;
      }
      @keyframes pageFadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to   { opacity: 1; transform: translateY(0); }
      }

      /* ── EMPTY STATE ── */
      .archive-empty {
        grid-column: 1 / -1;
        text-align: center; padding: 48px 0;
        color: rgba(156,163,175,0.5); font-size: 0.9rem;
      }
    </style>
  </head>

  <body class="page-fade">
    <div id="header-placeholder"></div>

    <main>
      <section class="archive-section">
        <div style="max-width:1100px;margin:0 auto;padding:0 clamp(16px,5vw,48px);">

          <div class="archive-page-header">
            <div class="archive-eyebrow">Publikasi HMTE</div>
            <h1 class="archive-title">Elektro <em>Magazine</em></h1>
            <p class="archive-subtitle">Seluruh edisi E-Magz HMTE Unsoed — informasi, kreativitas, dan inspirasi mahasiswa Teknik Elektro.</p>
          </div>

          <div class="archive-stats">
            <div class="archive-stat">
              <span class="archive-stat-num" id="total-editions">—</span>
              <span class="archive-stat-label">Total Edisi</span>
            </div>
            <div class="archive-stat">
              <span class="archive-stat-num">2025</span>
              <span class="archive-stat-label">Tahun Terbit</span>
            </div>
            <div class="archive-stat">
              <span class="archive-stat-num">PDF</span>
              <span class="archive-stat-label">Format</span>
            </div>
          </div>

          <hr class="archive-divider" />

          <div id="emagz-archive-container" class="archive-grid">
            <div style="grid-column:1/-1;text-align:center;padding:48px 0;color:rgba(156,163,175,0.4);">
              <i class="fas fa-spinner fa-spin" style="font-size:1.5rem;margin-bottom:12px;display:block;color:#0fbc6d;"></i>
              Memuat edisi...
            </div>
          </div>

        </div>
      </section>
    </main>

    <div id="footer-placeholder"></div>

    <script src="../../js/loader.js"></script>
    <script src="../../js/emagz.js"></script>

    <script>
    (function () {
      // Animasi elemen statis (header, stats, divider)
      function initPageAnimations() {
        var targets = document.querySelectorAll('.archive-page-header, .archive-stats, .archive-divider');
        if (!targets.length) return;
        var obs = new IntersectionObserver(function(entries) {
          entries.forEach(function(e) {
            if (e.isIntersecting) { e.target.classList.add('is-visible'); obs.unobserve(e.target); }
          });
        }, { threshold: 0.1 });
        targets.forEach(function(el) { obs.observe(el); });
      }

      // Update angka total edisi setelah data tersedia
      function updateStats() {
        var el = document.getElementById('total-editions');
        if (el && typeof emagzData !== 'undefined') {
          el.textContent = emagzData.length;
        }
      }

      document.addEventListener('DOMContentLoaded', function() {
        initPageAnimations();
      });

      // Dipanggil setelah loadEmagzArchivePage selesai
      document.addEventListener('component:loaded', function(e) {
        updateStats();
      });

      // Fallback: update setelah 500ms
      setTimeout(updateStats, 500);
    })();
    </script>
  </body>
</html>