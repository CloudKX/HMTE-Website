<!DOCTYPE html>
<html lang="id">
  <head>
    <base href="/" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="page-title">Halaman Berita - HMTE Unsoed</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../css/style.css" />
    <link rel="stylesheet" href="../../css/satoshi.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <style>
      /* ══════════════════════════════════════════════════
          1. BASE & BACKGROUND (GRID TEMA KONSISTEN)
      ══════════════════════════════════════════════════ */
      html { overflow-x: hidden !important; }
      body {
        overflow-x: hidden !important;
        max-width: 100vw !important;
        color: #ffffff !important;
        margin: 0; min-height: 100vh;
        background-color: #0a0e14 !important; /* Warna dasar Dark Mode Premium */
        
        /* Background Grid Halus */
        background-image: 
          linear-gradient(to right, rgba(255, 255, 255, 0.03) 1px, transparent 1px), 
          linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 1px, transparent 1px) !important;
        background-size: 40px 40px !important;
      }

      /* ── PAGE FADE IN ── */
      .page-fade { animation: pageFadeIn 0.7s ease both; }
      @keyframes pageFadeIn {
        from { opacity: 0; transform: translateY(15px); }
        to   { opacity: 1; transform: translateY(0); }
      }

      /* ══════════════════════════════════════════════════
          2. PAGE WRAPPER (HEADER CLEARANCE)
      ══════════════════════════════════════════════════ */
      .news-wrap {
        padding-top: 130px; /* Jarak aman dari fixed header */
        padding-bottom: 80px;
        position: relative;
      }
      
      /* Glow hijau ambient di atas halaman */
      .news-wrap::before {
        content: '';
        position: absolute; top: 0; left: 50%; transform: translateX(-50%);
        width: min(800px, 100%); height: 350px;
        background: radial-gradient(ellipse, rgba(15,188,109,0.08) 0%, transparent 75%);
        pointer-events: none;
      }

      .news-inner {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 clamp(16px, 5vw, 48px);
      }

      /* ══════════════════════════════════════════════════
          3. TITLE BLOCK & TYPOGRAPHY
      ══════════════════════════════════════════════════ */
      .news-title-block {
        text-align: center;
        margin-bottom: clamp(40px, 6vh, 64px);
      }
      .news-eyebrow {
        display: inline-flex; align-items: center; gap: 10px;
        font-size: 0.7rem; letter-spacing: 0.25em;
        text-transform: uppercase; color: #0fbc6d; font-weight: 800;
        margin-bottom: 14px;
      }
      .news-eyebrow::before, .news-eyebrow::after {
        content: ''; display: block; width: 20px; height: 1px;
        background: #0fbc6d; opacity: 0.5;
      }
      
      .solid-title {
        color: #ffffff !important;
        font-size: clamp(2.25rem, 7vw, 3.8rem) !important;
        font-weight: 900 !important;
        letter-spacing: -0.04em !important;
        line-height: 1.1 !important;
        margin-bottom: 16px !important;
      }
      .solid-title em { color: #0fbc6d !important; font-style: normal; }

      .news-subtitle {
        font-size: clamp(0.9rem, 2vw, 1.05rem);
        color: rgba(156,163,175,0.65);
        max-width: 520px; margin: 0 auto; line-height: 1.6;
      }

      /* ══════════════════════════════════════════════════
          4. GRID BERITA (RESPONSIVE & ANTI-GEPENG)
      ══════════════════════════════════════════════════ */
      #all-news-container {
        display: grid !important;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)) !important;
        gap: clamp(16px, 3vw, 28px) !important;
        margin-bottom: 50px !important;
        justify-items: center;
      }

      /* ── KARTU BERITA (GLASSMORPHISM) ── */
      #all-news-container > div {
        background: linear-gradient(145deg,
          rgba(15,188,109,0.06) 0%, rgba(13,17,23,0.98) 40%,
          rgba(13,17,23,0.98) 100%
        ) !important;
        border: 1px solid rgba(15,188,109,0.12) !important;
        border-radius: 18px !important;
        overflow: hidden !important;
        box-shadow: 0 4px 24px rgba(0,0,0,0.45) !important;
        display: flex !important;
        flex-direction: column !important;
        width: 100% !important;
        max-width: 340px !important; /* Kunci ukuran agar tidak raksasa di desktop */
        
        /* Animasi Awal */
        opacity: 0;
        transform: translateY(30px);
        transition: 
          opacity 0.6s cubic-bezier(0.23,1,0.32,1), 
          transform 0.6s cubic-bezier(0.23,1,0.32,1), 
          border-color 0.3s ease, 
          box-shadow 0.3s ease !important;
      }

      /* Class pemicu animasi dari JS */
      #all-news-container > div.is-visible {
        opacity: 1 !important;
        transform: translateY(0) !important;
      }

      /* Garis Shimmer Atas */
      #all-news-container > div::before {
        content: ''; position: absolute; top: 0; left: 8%; right: 8%; height: 1px;
        background: linear-gradient(90deg, transparent, rgba(15,188,109,0.35), transparent);
        z-index: 2; pointer-events: none;
      }

      #all-news-container > div:hover {
        transform: translateY(-8px) !important;
        border-color: rgba(15,188,109,0.3) !important;
        box-shadow: 0 20px 48px rgba(0,0,0,0.6), 0 0 24px rgba(15,188,109,0.1) !important;
      }

      /* ── GAMBAR ANTI-GEPENG ── */
      #all-news-container img {
        width: 100% !important; 
        aspect-ratio: 16 / 10 !important; /* Proporsi ideal layar HP */
        object-fit: cover !important;
        filter: brightness(0.85) saturate(1.1) !important;
        transition: transform 0.6s cubic-bezier(0.23,1,0.32,1) !important;
      }
      #all-news-container > div:hover img {
        transform: scale(1.08) !important;
        filter: brightness(0.95) !important;
      }

      /* ── KONTEN CARD ── */
      #all-news-container .p-4 {
        background: transparent !important; 
        padding: 18px 20px 22px !important;
        flex: 1 !important;
        display: flex !important;
        flex-direction: column !important;
        gap: 10px !important;
      }

      /* Badge Kategori */
      #all-news-container .text-green-400 {
        font-size: 0.65rem !important; font-weight: 800 !important;
        letter-spacing: 0.08em !important; text-transform: uppercase !important;
        color: #0fbc6d !important; padding: 4px 10px !important;
        background: rgba(15,188,109,0.1) !important;
        border: 1px solid rgba(15,188,109,0.2) !important;
        border-radius: 30px !important; width: fit-content !important;
      }

      /* Judul Berita */
      #all-news-container h3 {
        font-size: 1.1rem !important; font-weight: 800 !important;
        color: rgba(255,255,255,0.95) !important; line-height: 1.4 !important;
        margin: 0 !important; display: -webkit-box !important;
        -webkit-line-clamp: 2 !important; -webkit-box-orient: vertical !important;
        overflow: hidden !important; transition: color 0.3s ease !important;
      }
      #all-news-container > div:hover h3 { color: #fff !important; }

      /* Deskripsi Singkat */
      #all-news-container .text-gray-400 {
        font-size: 0.82rem !important; color: rgba(156,163,175,0.6) !important;
        line-height: 1.6 !important; margin: 0 !important;
      }

      /* Tanggal (Meta) */
      #all-news-container .text-xs.text-gray-400 {
        font-size: 0.7rem !important; color: rgba(156,163,175,0.4) !important;
        margin-top: auto !important; padding-top: 12px !important;
        border-top: 1px solid rgba(255,255,255,0.06) !important;
      }

      /* ══════════════════════════════════════════════════
          5. PAGINATION (MOBILE FRIENDLY)
      ══════════════════════════════════════════════════ */
      #news-pagination-container {
        display: flex; justify-content: center; gap: 10px !important; margin-top: 40px;
      }
      #news-pagination-container button {
        min-width: 40px !important; height: 40px !important;
        border-radius: 12px !important; font-weight: 700 !important;
        background: rgba(255,255,255,0.05) !important;
        border: 1px solid rgba(255,255,255,0.08) !important;
        color: rgba(255,255,255,0.6) !important; transition: all 0.3s ease !important;
      }
      #news-pagination-container button.bg-green-500 {
        background: #0fbc6d !important; color: white !important;
        box-shadow: 0 0 20px rgba(15,188,109,0.3) !important;
      }
      #news-pagination-container button:hover:not(:disabled) {
        border-color: #0fbc6d !important; color: #0fbc6d !important;
      }

      /* ══════════════════════════════════════════════════
          6. MOBILE OVERRIDE (ANDROID SPECIFIC)
      ══════════════════════════════════════════════════ */
      @media screen and (max-width: 600px) {
        .news-wrap { padding-top: 115px; }
        .solid-title { font-size: 2.3rem !important; }
        #all-news-container { grid-template-columns: 1fr !important; gap: 20px !important; }
        #all-news-container > div { max-width: 100% !important; }
        #news-pagination-container button { min-width: 36px !important; height: 36px !important; }
      }
    </style>
  </head>

  <body class="page-fade">
    <div id="header-placeholder"></div>

    <main class="news-wrap">
      <div class="news-inner">
        
        <div class="news-title-block">
          <div class="news-eyebrow">Informasi Terkini</div>
          <h1 class="solid-title">Portal <em>Berita</em></h1>
          <p class="news-subtitle">Simak liputan kegiatan, pengumuman resmi, dan kabar terbaru dari HMTE Unsoed.</p>
        </div>

        <div id="all-news-container"></div>

        <div id="news-pagination-container"></div>

      </div>
    </main>

    <div id="footer-placeholder"></div>

    <script src="../../js/loader.js"></script>
    <script src="../../js/data/news.js"></script>
    <script src="../../js/data/calendar.js"></script>
    <script src="../../js/data/news-generator.js"></script>

    <script>
    (function () {
      function initNewsAnimations() {
        var container = document.getElementById('all-news-container');
        if (!container) return;

        // Observer untuk kartu
        var cardObs = new IntersectionObserver(function(entries) {
          entries.forEach(function(e) {
            if (e.isIntersecting) { 
              e.target.classList.add('is-visible'); 
              cardObs.unobserve(e.target); 
            }
          });
        }, { threshold: 0.1, rootMargin: '0px 0px -30px 0px' });

        function applyAnimations() {
          var cards = container.querySelectorAll(':scope > div:not([data-obs])');
          cards.forEach(function(card, index) {
            card.setAttribute('data-obs', '1');
            // Staggered delay (0.1s per card)
            card.style.transitionDelay = (index * 0.1) + 's';
            cardObs.observe(card);
          });
        }

        // Pantau perubahan DOM (jika berita diload via AJAX)
        new MutationObserver(applyAnimations).observe(container, { childList: true });

        // Polling fallback
        var tries = 0;
        var check = setInterval(function() {
          if (container.children.length > 0 || tries > 40) {
            clearInterval(check);
            applyAnimations();
          }
          tries++;
        }, 200);
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initNewsAnimations);
      } else {
        initNewsAnimations();
      }
    })();
    </script>
  </body>
</html>