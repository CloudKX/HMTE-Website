<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="page-title">Memuat Berita...</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/satoshi.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  </head>

  <body class="bg-gray-900 text-white min-h-screen flex flex-col font-satoshi">
    <div id="header-placeholder"></div>

    <main class="flex-grow">
      <div class="container mx-auto px-4 md:px-8 lg:px-20 py-8">
        <button onclick="window.history.back()" class="group flex items-center text-gray-400 hover:text-white transition text-sm font-medium">
          <span class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center mr-3 group-hover:bg-gray-700 transition">
            <i class="fas fa-arrow-left text-xs"></i>
          </span>
          Kembali ke Berita
        </button>
      </div>

      <article class="container mx-auto px-4 md:px-8 lg:px-40 pb-20 fade-in">
        <header class="mb-8 text-center md:text-left max-w-4xl mx-auto">
          <span id="detail-category" class="inline-block px-3 py-1 bg-cyan-900/50 text-cyan-400 border border-cyan-800 rounded-full text-xs font-bold uppercase tracking-wider mb-4"> ... </span>

          <h1 id="detail-title" class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-white mb-6 leading-tight">Memuat Judul Berita...</h1>

          <div class="flex items-center justify-center md:justify-start text-sm text-gray-400 border-b border-gray-800 pb-8">
            <i class="far fa-calendar-alt mr-2 text-green-500"></i>
            <span id="detail-date">...</span>
            <span class="mx-3 text-gray-600">|</span>
            <span class="text-gray-500">Tim Redaksi HMTE</span>
          </div>
        </header>

        <div class="max-w-5xl mx-auto mb-12">
          <div class="rounded-2xl overflow-hidden shadow-2xl border border-gray-800 bg-black/50 relative min-h-[200px] flex items-center justify-center">
            <img id="detail-image" src="" alt="Cover Berita" class="w-full h-auto max-h-[600px] object-contain mx-auto block" onerror="this.style.display='none';" />
          </div>
          <p class="text-center text-xs text-gray-500 mt-3 italic">Dokumentasi Kegiatan</p>
        </div>

        <div class="max-w-3xl mx-auto">
          <div id="detail-content" class="prose prose-invert prose-lg max-w-none text-gray-300 leading-relaxed">
            <p>Memuat konten berita...</p>
          </div>
        </div>
      </article>
    </main>

    <div id="footer-placeholder"></div>

    <script src="/js/data/news.js"></script>
    <script src="/js/loader.js"></script>

    <script>
      // Logika Detail Berita (Embedded Script untuk Simplicity)
      function loadNewsContent() {
        const urlParams = new URLSearchParams(window.location.search);
        const newsId = urlParams.get("id");

        const titleEl = document.getElementById("detail-title");
        const dateEl = document.getElementById("detail-date");
        const categoryEl = document.getElementById("detail-category");
        const imageEl = document.getElementById("detail-image");
        const contentEl = document.getElementById("detail-content");
        const pageTitleEl = document.getElementById("page-title");

        if (typeof newsData === "undefined") {
          titleEl.textContent = "Error: Data Berita tidak tersedia.";
          contentEl.innerHTML = "<p class='text-red-400 text-center'>Pastikan file news.js dimuat dengan benar.</p>";
          return;
        }

        const newsItem = newsData.find((item) => item.id === newsId);

        if (newsItem) {
          // Set Data
          titleEl.textContent = newsItem.title;
          dateEl.textContent = newsItem.date; // Asumsi format tanggal sudah cantik dari data, atau bisa diproses lagi
          categoryEl.textContent = newsItem.category || "Umum";
          pageTitleEl.textContent = newsItem.title + " | HMTE Unsoed";

          // Fix Gambar (Jalur Absolut)
          // Cek jika path sudah absolut atau http, jika tidak tambahkan slash
          const imgSrc = newsItem.imgSrc.startsWith("http") || newsItem.imgSrc.startsWith("/") ? newsItem.imgSrc : `/${newsItem.imgSrc}`;

          imageEl.src = imgSrc;
          imageEl.alt = newsItem.title;

          // Set Konten
          contentEl.innerHTML = newsItem.content;
        } else {
          // 404 Handling
          titleEl.textContent = "Berita Tidak Ditemukan";
          categoryEl.style.display = "none";
          dateEl.parentElement.style.display = "none"; // Sembunyikan baris tanggal
          contentEl.innerHTML =
            "<div class='text-center py-10'><p class='text-gray-400 mb-4'>Maaf, artikel berita yang Anda cari tidak ditemukan.</p><a href='/page/news/news.html' class='text-green-500 hover:underline'>Kembali ke Daftar Berita</a></div>";
          imageEl.parentElement.style.display = "none"; // Sembunyikan container gambar
          pageTitleEl.textContent = "404 - Tidak Ditemukan";
        }
      }

      // Eksekusi setelah DOM siap
      document.addEventListener("DOMContentLoaded", () => {
        // Timeout kecil untuk memastikan dependensi (jika ada) siap
        setTimeout(() => {
          loadNewsContent();
        }, 100);
      });
    </script>
  </body>
</html>
