<style>
  .podcast-section {
    position: relative;
    padding: clamp(36px, 7vh, 80px) 0;
    overflow: hidden;
  }
  .podcast-section::before {
    content: '';
    position: absolute;
    top: 0; left: 50%; transform: translateX(-50%);
    width: min(600px, 100%); height: 280px;
    background: radial-gradient(ellipse, rgba(15,188,109,0.05) 0%, transparent 70%);
    pointer-events: none;
  }

  .podcast-inner {
    max-width: 900px; margin: 0 auto;
    padding: 0 clamp(16px, 5vw, 48px);
    display: flex; flex-direction: column; align-items: center;
  }

  .podcast-header {
    text-align: center;
    margin-bottom: clamp(24px, 4vh, 44px);
    display: flex; flex-direction: column; align-items: center; gap: 10px;
    opacity: 0; transform: translateY(20px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }
  .podcast-header.is-visible { opacity: 1; transform: translateY(0); }

  .podcast-eyebrow {
    display: inline-flex; align-items: center; gap: 10px;
    font-size: 0.68rem; letter-spacing: 0.22em;
    text-transform: uppercase; color: #0fbc6d; font-weight: 700;
  }
  .podcast-eyebrow::before, .podcast-eyebrow::after {
    content: ''; display: block; width: 20px; height: 1px;
    background: #0fbc6d; opacity: 0.6;
  }
  .podcast-title {
    font-size: clamp(1.75rem, 5vw, 3.2rem); font-weight: 900;
    color: #fff; letter-spacing: -0.04em; line-height: 1; margin: 0;
  }
  .podcast-title em { font-style: normal; color: #0fbc6d; }
  .podcast-subtitle {
    font-size: clamp(0.8rem, 2vw, 0.92rem);
    color: rgba(156,163,175,0.6); margin: 0; line-height: 1.6;
    max-width: 400px; text-align: center;
  }

  /* Grid: auto-fit min 280px */
  .podcast-grid {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: clamp(14px, 2.5vw, 24px);
  }

  .podcast-card {
    position: relative; border-radius: 16px; overflow: hidden;
    background: linear-gradient(145deg,
      rgba(15,188,109,0.07) 0%, rgba(13,17,23,0.98) 35%,
      rgba(13,17,23,0.98) 65%, rgba(15,188,109,0.04) 100%
    );
    border: 1px solid rgba(15,188,109,0.1);
    box-shadow: 0 4px 24px rgba(0,0,0,0.45);
    aspect-ratio: 16/9;
    opacity: 0; transform: translateY(28px);
    transition: opacity 0.55s cubic-bezier(0.23,1,0.32,1),
      transform 0.55s cubic-bezier(0.23,1,0.32,1),
      border-color 0.3s ease, box-shadow 0.3s ease;
  }
  .podcast-card.is-visible { opacity: 1; transform: translateY(0); }
  .podcast-card:nth-child(1) { transition-delay: 0.05s; }
  .podcast-card:nth-child(2) { transition-delay: 0.15s; }
  .podcast-card:nth-child(3) { transition-delay: 0.25s; }
  .podcast-card:nth-child(4) { transition-delay: 0.35s; }

  .podcast-card::before {
    content: ''; position: absolute; top: 0; left: 8%; right: 8%; height: 1px;
    background: linear-gradient(90deg, transparent, rgba(15,188,109,0.35), transparent);
    z-index: 2; pointer-events: none;
  }
  .podcast-card:hover {
    border-color: rgba(15,188,109,0.28);
    box-shadow: 0 16px 40px rgba(0,0,0,0.55), 0 0 24px rgba(15,188,109,0.07);
    transform: translateY(-4px) !important;
  }

  .podcast-card iframe { width: 100%; height: 100%; border: none; display: block; }

  /* Skeleton */
  .podcast-skel {
    background: rgba(255,255,255,0.04); border-radius: 6px;
    animation: podSkel 1.6s ease-in-out infinite;
    width: 100%; height: 100%;
  }
  @keyframes podSkel { 0%,100%{opacity:.3} 50%{opacity:.6} }

  /* Mobile: 1 kolom */
  @media (max-width: 540px) {
    .podcast-grid { grid-template-columns: 1fr; }
  }
</style>

<section class="podcast-section">
  <div class="podcast-inner">

    <div class="podcast-header">
      <span class="podcast-eyebrow">Media HMTE</span>
      <h2 class="podcast-title">Pod<em>cast</em></h2>
      <p class="podcast-subtitle">POTEK — Podcast Teknik Elektro Unsoed.</p>
    </div>

    <!--
      Container ini dikosongkan — diisi oleh script di bawah via fetch().
      Tidak ada lagi iframe hardcoded di sini.
    -->
    <div id="podcast-container" class="podcast-grid">
      <!-- Skeleton awal -->
      <div class="podcast-card is-visible"><div class="podcast-skel"></div></div>
      <div class="podcast-card is-visible"><div class="podcast-skel"></div></div>
    </div>

  </div>
</section>

<script>
(function () {
  // ── Path ke file JSON yang dikelola Decap CMS ──────────────────────────────
  var PODCAST_JSON = '/js/data/json/podcast.json';

  // ── Render: ambil data, buat iframe per video ──────────────────────────────
  function renderPodcastVideos(videos) {
    var container = document.getElementById('podcast-container');
    if (!container) return;

    if (!videos || videos.length === 0) {
      container.innerHTML = '<p style="color:rgba(156,163,175,0.5);text-align:center;grid-column:1/-1;">Belum ada episode yang tersedia.</p>';
      return;
    }

    // Urutkan descending by episode number
    var sorted = videos.slice().sort(function(a, b) { return b.episode - a.episode; });

    container.innerHTML = sorted.map(function(v, i) {
      // Embed URL YouTube: https://www.youtube.com/embed/VIDEO_ID
      var embedSrc = 'https://www.youtube.com/embed/' + v.youtubeId;
      return (
        '<div class="podcast-card" style="transition-delay:' + (i * 0.1) + 's">' +
          '<iframe src="' + embedSrc + '"' +
            ' title="' + v.title + '"' +
            ' allowfullscreen loading="lazy">' +
          '</iframe>' +
        '</div>'
      );
    }).join('');

    // Re-trigger animasi setelah card baru di-inject
    initPodcastAnim();
  }

  // ── Fetch dari JSON ────────────────────────────────────────────────────────
  function loadPodcastSection() {
    fetch(PODCAST_JSON)
      .then(function(res) {
        if (!res.ok) throw new Error('HTTP ' + res.status);
        return res.json();
      })
      .then(function(data) {
        renderPodcastVideos(data.videos || []);
      })
      .catch(function(e) {
        console.error('[podcast.html] Gagal fetch:', e.message);
        var container = document.getElementById('podcast-container');
        if (container) {
          container.innerHTML = '<p style="color:rgba(239,68,68,0.8);text-align:center;grid-column:1/-1;">Gagal memuat episode. Silakan refresh.</p>';
        }
      });
  }

  // ── Animasi scroll-in ──────────────────────────────────────────────────────
  function initPodcastAnim() {
    var targets = document.querySelectorAll('.podcast-header, #podcast-container .podcast-card');
    if (!targets.length) return;
    var obs = new IntersectionObserver(function(entries) {
      entries.forEach(function(e) {
        if (e.isIntersecting) { e.target.classList.add('is-visible'); obs.unobserve(e.target); }
      });
    }, { threshold: 0.08, rootMargin: '0px 0px -40px 0px' });
    targets.forEach(function(el) { el.classList.remove('is-visible'); obs.observe(el); });
  }

  // ── Daftarkan ke component registry loader.js ──────────────────────────────
  // init() dipanggil otomatis oleh loadComponent() setelah HTML diinjeksi.
  window.__components = window.__components || {};
  window.__components['podcast'] = {
    init: function() {
      loadPodcastSection(); // ← ini yang sebelumnya tidak pernah dipanggil
    }
  };

  // Expose juga ke global kalau dipanggil manual
  window.loadPodcastSection = loadPodcastSection;
})();
</script>